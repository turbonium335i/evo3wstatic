<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evo-A.I.</title>
    <link rel="shortcut icon" type="image/png"
        href="https://i.postimg.cc/TwPQwwDF/204-2049751-network-icon-red-network-icon-png.png">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    <style>
        body {
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
        }

        .navbar2 {
            overflow: hidden;
            background-color: silver;
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 0px;
            transition: 0.5s;
        }


        .main {
            padding: 16px;
            margin-bottom: 30px;
        }

        .textOrange {
            color: orange;
            background-color: black;
        }

        .highlighter {
            background: yellow;
        }

        .circle {
            display: inline-block;
            border: 1px solid red;
            color: black;
            border-radius: 50%;
            font-size: 15px;
            line-height: 25px;
            /* set to same size as width, height */
            width: 25px;
            height: 25px;
            text-align: center;
        }
    </style>





</head>

<body>

    <div class="container pt-3">
        <h3>Section 1 Reading & Writing</h2>
            <div class="d-flex justify-content-between   fw-bold  ">
                <h5>Directions</h5>
                <h5>0:00</h5>
                <h4 id="openbtn" onclick="openNav()" class=" float-end" style="cursor: pointer;">
                    <i class="bi bi-pencil-fill border rounded"> </i>
                    <i class="bi bi-three-dots-vertical border rounded"></i>
                </h4>
            </div>

            <hr style="border-top: dotted black;">
            <div class="row align-items-start">
                <div class="col pt-5" id="target">

                    Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diem nonummy nibh euismod tincidunt ut
                    lacreet dolore magna aliguam erat volutpat. Ut wisis enim ad minim veniam, quis nostrud exerci
                    tution
                    ullam corper suscipit lobortis nisi ut aliquip ex ea commodo consequat. Duis te feugi facilisi. Duis
                    autem dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat
                    nulla
                    facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril
                    delenit
                    au gue duis dolore te feugat nulla facilisi.


                </div>
                <div class="col">

                    <br>
                    <div class="d-flex justify-content-between mt-4 mb-2 mx-lg-5  fw-bold  "
                        style="background-color:#D3D3D3; border-bottom: dotted gray;">
                        <div class="bg-dark text-light px-1" span> 12</div>
                        <div class="pe-1"><i class="bi bi-bookmark"></i> </div>
                    </div>

                    <div class="mb-2 mx-lg-5 py-2 ps-1">
                        Which correctly completes the sentence?</div>

                    <div class=" border border-secondary rounded mb-2 mx-lg-5 py-2 ps-2" id="aa"
                        style="cursor:pointer;">
                        <span class="circle">A</span>
                        NO CHANGE.
                    </div>
                    <div class=" border border-secondary rounded mb-2 mx-lg-5 py-2 ps-2" id="bb"
                        style="cursor:pointer;">
                        B. is
                    </div>
                    <div class=" border border-secondary rounded mb-2 mx-lg-5 py-2 ps-2" id="cc"
                        style="cursor:pointer;">
                        C. are
                    </div>
                    <div class=" border border-secondary rounded mb-2 mx-lg-5 py-2 ps-2" id="dd"
                        style="cursor:pointer;">
                        D. was
                    </div>
                </div>
            </div>

    </div>
    <div class="navbar2" id="mySidebar">



        <div class="bg-dark pb-3 text-light mb-3">
            <span id="selput">Annotation Notes </span>
            <p class="text-warning float-end mx-3 pt-2" href="#contact" onclick="closeNav()">CLOSE X</p>
        </div>
        <div class="ps-3 ">
            <button class="btn btn-warning ">Highlight</button>
            <button class="btn btn-secondary" onclick="clean()">Underline</button>
        </div>
        <div class="mx-5 pt-3">


            <textarea class="form-control rounded-0" id="exampleFormControlTextarea1" rows="5"
                spellcheck="false"></textarea>



        </div>
        <div class="ps-3 mt-2"> <button class="btn btn-primary rounded-5">Save</button>
            <button class="btn btn-secondary rounded-5">Cancel</button>
        </div>

    </div>


    <script>


        var selectedText = ""
        var open = false


        function closeNav() {
            document.getElementById("mySidebar").style.height = "0px";
            open = false

        }

        function openNav() {
            document.getElementById("mySidebar").style.height = "45vh";
            open = true

        }






        var flag = 0,
            element = document;
        element.addEventListener("touchstart", function () {
            flag = 0;
        }, false);
        element.addEventListener("touchmove", function () {
            flag = 1;
        }, false);
        element.addEventListener("touchend", function () {
            if (flag === 1) {
                getSelText();
            }
        }, false);


        var flag = 0,
            element = document;
        element.addEventListener("mousedown", function () {
            flag = 0;
        }, false);
        element.addEventListener("mousemove", function () {
            flag = 1;
        }, false);
        element.addEventListener("mouseup", function () {
            if (flag === 1) {
                getSelText();
            }
        }, false);

        // document.addEventListener("selectionchange", function (e) {
        //     //do something, e.g. document.getSelection()        
        //     alert(e)
        // });
        var seltext = "Annotation Notes"



        function getSelText(action) {
            var sel = window.getSelection ? window.getSelection() : document.selection.createRange(); // FF : IE
            seltext = window.getSelection().toString()

            document.getElementById("selput").innerText = seltext

            if (open) {

                if (sel.getRangeAt) { // thats for FF
                    var range = sel.getRangeAt(0);
                    var newNode = document.createElement("span");
                    newNode.setAttribute('class', 'highlighter');

                    newNode.setAttribute("onclick", onclick = "openNav()");
                    range.surroundContents(newNode);
                } else { //and thats for IE7
                    sel.pasteHTML('<span class="highlighter" onclick="openNav()">' + sel.htmlText + '</span>');

                }
            }

        }


        var originalText = "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diem nonummy nibh euismod tincidunt ut lacreet dolore magna aliguam erat volutpat. Ut wisis enim ad minim veniam, quis nostrud exerci tution ullam corper suscipit lobortis nisi ut aliquip ex ea commodo consequat. Duis te feugi facilisi. Duis autem dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit au gue duis dolore te feugat nulla facilisi."

        function clean() {

            var text = document.getElementById("target")
            text.innerHTML = originalText
            document.getElementById("selput").innerText = "Annotation Notes"

            // text.style.backgroundColor = "green";

            //             document.getElementById("id0").querySelectorAll('span').forEach(element => {
            //   console.log (element);
            // })

            // document.querySelectorAll('span').forEach(element => {
            //     console.log(element.innerText)
            //     element.classList.remove("highlighter");
            //     // element.remove()
            // })

        }
    </script>

</body>

</html>